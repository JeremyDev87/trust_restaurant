# [F002] AI 요약 응답

## 1. 기능 개요

| 항목 | 내용 |
|------|------|
| 기능명 | AI 요약 응답 |
| 목적 | 조회된 위생 데이터를 사용자가 이해하기 쉬운 자연어로 변환하여 전달 |
| 한 줄 설명 | 식당 위생 정보 조회 결과를 명확하고 간결한 한국어 문장으로 요약하는 기능 |

## 2. 유저 스토리

### US-001: 쉬운 위생 정보 이해
> **As a** 위생 정보를 빠르게 파악하고 싶은 사용자
> **I want** 복잡한 데이터 대신 이해하기 쉬운 요약을 받고 싶다
> **So that** 별도의 해석 없이 식당 위생 상태를 즉시 판단할 수 있다

### US-002: 법적 용어 해석
> **As a** 행정처분 용어에 익숙하지 않은 일반 사용자
> **I want** "시설개수명령" 같은 용어를 쉬운 말로 설명받고 싶다
> **So that** 처분의 의미를 정확히 이해할 수 있다

## 3. 사용자 시나리오

### 3.1 정상 시나리오

#### S-001: 위생 등급 보유 + 처분 이력 없음
- **입력 데이터**: 등급 AA, 처분 이력 0건
- **요약 출력**:
  ```
  🏆 위생등급: ★★ 우수 (AA)
  ✅ 행정처분: 최근 3년간 처분 이력이 없습니다.
  ```

#### S-002: 위생 등급 보유 + 처분 이력 있음
- **입력 데이터**: 등급 A, 처분 이력 1건 (과태료)
- **요약 출력**:
  ```
  🏆 위생등급: ★ 좋음 (A)
  ⚠️ 행정처분: 1건
     - 2023.05.12 | 과태료 50만원 | 유통기한 경과 제품 보관
  ```

#### S-003: 위생 등급 미보유 + 처분 이력 없음
- **입력 데이터**: 등급 없음, 처분 이력 0건
- **요약 출력**:
  ```
  ℹ️ 위생등급: 등급 미보유 (미신청 업소)
  ✅ 행정처분: 최근 3년간 처분 이력이 없습니다.
  ```

#### S-004: 위생 등급 미보유 + 처분 이력 다수
- **입력 데이터**: 등급 없음, 처분 이력 3건
- **요약 출력**:
  ```
  ℹ️ 위생등급: 등급 미보유 (미신청 업소)
  ⚠️ 행정처분: 3건
     - 2024.01.15 | 영업정지 7일 | 위생적 취급기준 위반
     - 2023.08.20 | 과태료 100만원 | 이물질 혼입
     - 2023.03.05 | 시정명령 | 조리시설 위생 불량
  ```

### 3.2 예외 시나리오

#### E-001: 조회 결과 없음
- **상황**: F001에서 식당을 찾지 못함
- **요약 출력**: (요약 생성 불가, F001의 에러 메시지 그대로 전달)

#### E-002: 부분 데이터만 존재
- **상황**: 위생 등급은 조회되나 처분 이력 API 오류
- **요약 출력**:
  ```
  🏆 위생등급: ★★ 우수 (AA)
  ❓ 행정처분: 현재 조회할 수 없습니다.
  ```

## 4. 입력-출력

### 4.1 입력

F001(식당 위생 정보 조회)의 출력 결과를 그대로 입력으로 받음.

```json
{
  "restaurant": { ... },
  "hygiene_grade": { ... },
  "violations": { ... }
}
```

### 4.2 출력

자연어 형태의 요약 문자열.

```
🏆 위생등급: ★★ 우수 (AA)
✅ 행정처분: 최근 3년간 처분 이력이 없습니다.
```

### 4.3 요약 포맷 규칙

| 구분 | 아이콘 | 사용 조건 |
|------|--------|-----------|
| 위생등급 | 🏆 | 등급 보유 시 |
| 위생등급 | ℹ️ | 등급 미보유 시 |
| 처분 없음 | ✅ | 이력 0건 |
| 처분 있음 | ⚠️ | 이력 1건 이상 |
| 조회 불가 | ❓ | API 오류 시 |

### 4.4 행정처분 용어 변환표

| 원문 (법적 용어) | 변환 (쉬운 표현) |
|------------------|------------------|
| 영업정지 | 영업정지 |
| 영업허가취소 | 영업허가 취소 |
| 과태료 | 과태료 |
| 시설개수명령 | 시설 개선 명령 |
| 품목제조정지 | 해당 품목 제조 금지 |
| 시정명령 | 시정 명령 |
| 위생적취급기준위반 | 위생 기준 위반 |

## 5. 의존성

### 5.1 외부 API
- 없음 (직접 API 호출 없음)

### 5.2 내부 의존성
| 기능 | 의존 관계 |
|------|-----------|
| F001-식당위생정보조회 | 필수 (입력 데이터 제공) |

### 5.3 연관 기능
- F001의 출력을 입력으로 받아 처리하는 후처리 기능

## 6. 성공 기준

| 지표 | 기준 | 측정 방법 |
|------|------|-----------|
| 요약 생성 성공률 | 100% | F001 성공 시 요약 항상 생성 |
| 용어 변환 정확도 | 100% | 변환표 기준 일치 여부 |
| 포맷 일관성 | 100% | 규정된 포맷 준수 여부 |

## 7. 우선순위

**P1 (Should Have)**

- 사용자 경험 향상을 위한 중요 기능
- F001만으로도 서비스 가능하나, 가독성 크게 향상

## 8. 제약사항

### 8.1 기술적 제약
- F001 기능에 완전히 의존 (F001 실패 시 요약 불가)
- 용어 변환표는 지속적 업데이트 필요

### 8.2 범위 제약
- 판단/권고 메시지 제외 (단순 요약만)
  - ❌ "안심하고 가셔도 좋습니다" (판단)
  - ✅ "처분 이력이 없습니다" (사실)

### 8.3 데이터 제약
- 처분 이력 최대 3건까지만 상세 표시
- 3건 초과 시 "외 N건" 으로 요약
